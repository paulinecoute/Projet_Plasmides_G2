{% extends "biolib/base.html" %}

{% block title %}Ã‰quipe Â· {{ team.name }}{% endblock %}

{% block content %}
<div class="container-fluid px-lg-5 py-4" style="max-width:1100px;">

  <!-- HEADER COLORÃ‰ -->
  <div class="rounded-4 p-5 mb-5 text-white shadow"
       style="background: linear-gradient(135deg, #4f46e5, #2563eb);">

    <h1 class="fw-bold mb-3">
      {{ team.name }}
    </h1>

    <p class="fs-5 opacity-90 mb-4" style="max-width:900px;">
      {{ team.description|default:"Aucune description nâ€™a Ã©tÃ© renseignÃ©e pour cette Ã©quipe." }}
    </p>

    <div class="d-flex flex-wrap gap-2">

      <span class="badge bg-light text-dark rounded-pill px-3 py-2">
        â­ Chef : {{ team.leader.email }}
      </span>

      <span class="badge bg-dark rounded-pill px-3 py-2">
        ğŸŒ {{ team.visibility|capfirst }}
      </span>

      <span class="badge bg-light text-dark rounded-pill px-3 py-2">
        ğŸ‘¥ {{ team.members.count }} membres
      </span>

    </div>

  </div>

  <!-- SECTION : STATISTIQUES -->
  <div class="mb-5">

    <h5 class="fw-bold mb-3">
      Statistiques de lâ€™Ã©quipe
    </h5>

    <div class="d-flex flex-wrap gap-3">

      <span class="badge bg-primary-subtle text-primary rounded-pill px-4 py-2">
        {{ team.members.count }} membres
      </span>

      <span class="badge bg-success-subtle text-success rounded-pill px-4 py-2">
        {{ team.templates.count|default:"0" }} templates
      </span>

      <span class="badge bg-secondary-subtle text-secondary rounded-pill px-4 py-2">
        â€” collections
      </span>

      <span class="badge bg-warning-subtle text-warning rounded-pill px-4 py-2">
        â€” tables
      </span>

      <span class="badge bg-info-subtle text-info rounded-pill px-4 py-2">
        â€” campagnes
      </span>

      <span class="badge bg-dark-subtle text-dark rounded-pill px-4 py-2">
        â€” plasmides
      </span>

    </div>

  </div>

  <!-- SECTION : RESSOURCES -->
  <div class="mb-5">

    <h5 class="fw-bold mb-3">
      Ressources de lâ€™Ã©quipe
    </h5>

    <div class="list-group rounded-4 shadow-sm overflow-hidden">
      <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
        <span class="fw-semibold">ğŸ“„ Templates</span>
        <span class="badge bg-primary rounded-pill">Voir</span>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
        <span class="fw-semibold">ğŸ§¬ Collections</span>
        <span class="badge bg-success rounded-pill">Voir</span>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
        <span class="fw-semibold">ğŸ“Š Tables de correspondance</span>
        <span class="badge bg-warning rounded-pill">Voir</span>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
        <span class="fw-semibold">ğŸ§ª Campagnes</span>
        <span class="badge bg-info rounded-pill">Voir</span>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
        <span class="fw-semibold">ğŸ§« Plasmides produits</span>
        <span class="badge bg-dark rounded-pill">Voir</span>
      </a>
    </div>

  </div>

  <!-- SECTION : MEMBRES -->
  <div class="mb-5">

    <h5 class="fw-bold mb-3">
      Membres de lâ€™Ã©quipe
    </h5>

    <div class="d-flex flex-wrap gap-2">
      {% for member in team.members.all %}
        {% if member == team.leader %}
          <span class="badge bg-warning text-dark rounded-pill px-3 py-2">
            â­ {{ member.email }}
          </span>
        {% else %}
          <span class="badge bg-light border text-dark rounded-pill px-3 py-2">
            {{ member.email }}
          </span>
        {% endif %}
      {% endfor %}
    </div>

  </div>

  <!-- ACTIONS -->
  <div class="border-top pt-4 mt-4 d-flex gap-3">

    {% if is_leader %}
      <a href="{% url 'team_manage_members' team.id %}"
         class="btn btn-outline-secondary rounded-pill">
        GÃ©rer les membres
      </a>

      <a href="{% url 'team_delete' team.id %}"
         class="btn btn-outline-danger rounded-pill">
        Supprimer lâ€™Ã©quipe
      </a>
    {% else %}
      <form method="post" action="{% url 'team_leave' team.id %}">
        {% csrf_token %}
        <button class="btn btn-outline-danger rounded-pill">
          Quitter lâ€™Ã©quipe
        </button>
      </form>
    {% endif %}

  </div>

</div>
{% endblock %}
